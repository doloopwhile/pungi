#!/bin/sh
set -euC
cd "$(dirname "$0")"

usage() {
  echo 'usage: quarry SUBCOMMAND ARGS...'
}

if [ "$#" -eq 0 ]; then
  usage >&2 && exit -1
fi

if [ "$1" = '-h' ] || [ "$1" = '--help' ]; then
  usage && exit
fi

if [ "$1" = '--version' ]; then
  exec libexec/subcommands/version
fi

cmd="libexec/subcommands/$1"
if [ ! -e "$cmd" ]; then
  usage >&2 && exit -1
fi

shift
exec "$cmd" "$@"